import{F as c,P as E}from"./loader-yIERnUXV.js";import"./animation-CygCfK5E.js";import{s as d}from"./supabaseClient-BnuRKQFQ.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";const p=document.getElementById("name"),r=document.getElementById("email"),l=document.getElementById("password"),v=document.getElementById("repassword"),m=document.querySelector(".registerbtn"),g=document.getElementById("loginbtn"),y=document.getElementById("phone");document.getElementById("fail-notification");const L=document.getElementById("GSign");async function I(){const t=p.value,n=r.value;if(!n.endsWith("@gectcr.ac.in")){c("Access Denied: You must use a valid GEC College email (@gectcr.ac.in)");return}const e=h.getNumber();if(!h.isValidNumber()){c("Please enter a valid phone number for your country.");return}const s=l.value,a=window.location.origin;console.log(a);const{data:i,error:u}=await d.auth.signUp({email:n,password:s,options:{emailRedirectTo:`${a}/../auth/login.html`,data:{display_name:t,Phone:e}}});u?c("Sign Up Failed!"+u.message):(E("Verification email sent! Please check your inbox to activate your account."),p.value="",v.value="",r.value="",l.value="",y.value="")}L.addEventListener("click",async()=>{const t=window.location.origin,{data:n,error:e}=await d.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${t}/../marketplace/market-place.html`}});e&&c("Sign in Failed "+e)});async function b(){const t=r.value,n=l.value,{data:e,error:s}=await d.auth.signInWithPassword({email:t,password:n});s?(console.log("Login Failed!"+s.message),FailNotification()):window.location.href="../marketplace/market-place.html"}m&&m.addEventListener("click",t=>{t.preventDefault(),I()});g&&g.addEventListener("click",t=>{t.preventDefault(),b()});const h=window.intlTelInput(y,{initialCountry:"in",separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js"}),w=document.getElementById("mail-req");r.addEventListener("input",t=>{const n=t.target.value;n!==""&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?w.classList.replace("hidden","block"):w.classList.replace("block","hidden")});const k=document.querySelectorAll(".pwd-eye");k.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const e=t.closest(".input-wrapper"),s=e.querySelector("input"),a=e.querySelector(".show-pwd"),i=e.querySelector(".hide-pwd");s.type==="password"?(s.type="text",i&&i.classList.replace("block","hidden"),a&&a.classList.replace("hidden","block")):(s.type="password",i&&i.classList.replace("hidden","block"),a&&a.classList.replace("block","hidden"))})});const f=document.getElementById("match");v.addEventListener("input",t=>{const n=t.target.value;n.length&&n!=l.value?f.classList.remove("hidden"):f.classList.add("hidden")});const o=(t,n)=>{const e=document.getElementById(t),s=e.querySelector(".icon");n?(e.classList.replace("text-red-500","text-green-600"),s.textContent="âœ“"):(e.classList.replace("text-green-600","text-red-500"),s.textContent="âœ•")};l.addEventListener("input",t=>{const n=document.getElementById("pwd-req"),e=t.target.value;e.length===0?n.classList.add("hidden"):n.classList.remove("hidden"),o("length",e.length>=8),o("lowercase",/[a-z]/.test(e)),o("uppercase",/[A-Z]/.test(e)),o("number",/\d/.test(e)),o("characters",/[#.?!@$%^&*-]/.test(e))});
