import{s as a}from"./supabaseClient-CvA8JclF.js";/* empty css                     */import"./marketplace-uLF1CyOb.js";const d=document.getElementById("sidebar"),v=document.getElementById("sidebar-logo"),I=document.getElementById("sidebar-btn"),E=document.querySelectorAll(".nav-text"),c=document.getElementById("sidebar-header"),f=document.getElementById("sidebar_text"),i=document.getElementById("main");I.addEventListener("click",()=>{d.classList.contains("w-64")?(d.classList.remove("w-64","px-10"),d.classList.add("w-29","px-9.5"),i.classList.remove("ml-64"),i.classList.add("ml-28"),v.classList.add("hidden"),f.classList.add("hidden"),c.classList.remove("gap-16"),c.classList.add("justify-center"),E.forEach(e=>{e.classList.add("hidden"),e.parentElement.classList.add("justify-center")})):(d.classList.remove("w-28","px-2"),d.classList.add("w-64","px-10"),i.classList.add("ml-64"),i.classList.remove("ml-28"),v.classList.remove("hidden"),f.classList.remove("hidden"),c.classList.add("gap-16"),c.classList.remove("justify-center"),E.forEach(e=>{e.classList.remove("hidden"),e.parentElement.classList.remove("justify-center")}))});document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("theme-toggle"),e=document.getElementById("theme-toggle-dark-icon"),t=document.getElementById("theme-toggle-light-icon");localStorage.getItem("color-theme")==="dark"||!("color-theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),t.classList.remove("hidden"),e.classList.add("hidden")):(document.documentElement.classList.remove("dark"),t.classList.add("hidden"),e.classList.remove("hidden")),s.addEventListener("click",function(){e.classList.toggle("hidden"),t.classList.toggle("hidden"),document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("color-theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("color-theme","dark"))})});const y=document.getElementById("imageuploads"),r=document.getElementById("file-input");r.addEventListener("change",()=>{[...r.files].forEach(s=>{const e=document.createElement("div"),t=document.createElement("img"),n=document.createElement("delbtn");n.innerHTML=`<button id='delbtn' class="cursor-pointer relative px-1 -top-47 -right-54 w-8 h-8 bg-white/60 rounded-4xl backdrop-blur-sm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M3 6h18"></path>
  <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
  <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
  <line x1="10" y1="11" x2="10" y2="17"></line>
  <line x1="14" y1="11" x2="14" y2="17"></line>
</svg></button>`,n.addEventListener("click",()=>{e.remove(),r.value=""}),t.src=URL.createObjectURL(s),t.className="ml-3 h-50 w-full object-cover rounded-lg",e.appendChild(t),e.appendChild(n),y.childElementCount<4&&y.appendChild(e)})});document.getElementById("delbtn");const k=document.getElementById("post-btn");k.addEventListener("click",async s=>{s.preventDefault();const e=document.getElementById("title").value,t=document.getElementById("description").value,n=document.getElementById("price").value,b=document.getElementById("details").value,w=document.getElementById("quantity").value,m=r.files;if(!e||!t||!n||m.length==0){alert("Please fill in Name, Price, and select an Image!");return}try{const l=[];for(const o of m){const h=`${Date.now()}-${o.name}`,{data:B,error:p}=await a.storage.from("Uploaded_Images").upload(h,o);if(p){alert("Upload Failed"+p.message);return}console.log("Success");const{data:{publicUrl:L}}=a.storage.from("Uploaded_Images").getPublicUrl(h);console.log("File Uploaded! Public Link:",L),l.push(L)}const{data:{user:u}}=await a.auth.getUser();if(!u){alert("You must be logged in to post!");return}const{error:g}=await a.from("products").insert([{title:e,price:n,description:t,quantity:w,details:b,image_url:l,seller_id:u.id}]);if(g)throw g;{alert("Item posted Successfully");const o=window.location.origin;console.log(o),window.location.href=`${o}/market-place.html`}}catch(l){alert("Upload Failed"+l.message)}});
